# PLLè¨­å®šç¢ºèªã‚¬ã‚¤ãƒ‰

## ğŸ“‹ ç”Ÿæˆã•ã‚ŒãŸPLLãƒ•ã‚¡ã‚¤ãƒ«

ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ï¼š

```
src/gowin_pll/
â”œâ”€â”€ gowin_pll.v          â† ãƒ¡ã‚¤ãƒ³PLLãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”œâ”€â”€ gowin_pll_mod.v      â† åˆæœŸåŒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”œâ”€â”€ pll_init.v           â† PLLåˆæœŸåŒ–ãƒ˜ãƒ«ãƒ‘ãƒ¼
â””â”€â”€ gowin_pll.ipc        â† IPè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
```

---

## ğŸ¯ VGAã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã®æ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: PLLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç¢ºèª

Gowin PLLã§è¨­å®šã™ã¹ãå€¤ï¼š

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | å€¤ | èª¬æ˜ |
|----------|-----|------|
| å…¥åŠ›ã‚¯ãƒ­ãƒƒã‚¯ | 27 MHz | Tang Primer 25Kã®ã‚ªãƒ³ãƒœãƒ¼ãƒ‰ |
| å‡ºåŠ›ã‚¯ãƒ­ãƒƒã‚¯ | 25.175 MHz | VGA 640x480@60Hzæ¨™æº– |
| ä½ç›¸ | 0Â° | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒˆãƒƒãƒ—ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æ›´æ–°

`VGA_BW_top_Tang25K.v` ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›´æ–°ï¼š

```verilog
module VGA_BW_top(
    input  wire clk,            // 27MHz
    input  wire reset_btn,      
    output wire vga_hsync,      
    output wire vga_vsync,      
    output wire vga_r,          
    output wire vga_g,          
    output wire vga_b           
);

    // PLLå‡ºåŠ›ã‚¯ãƒ­ãƒƒã‚¯
    wire clk_vga;
    wire pll_lock;  // PLLãƒ­ãƒƒã‚¯ä¿¡å·
    
    // Gowin PLL ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–
    Gowin_rPLL pll_inst (
        .clkout(clk_vga),       // 25.175MHzå‡ºåŠ›
        .lock(pll_lock),        // PLLãƒ­ãƒƒã‚¯
        .clkin(clk)             // 27MHzå…¥åŠ›
    );
    
    wire video_signal;
    
    VGA_BW_simple vga_core (
        .clk_25mhz  (clk_vga),      
        .reset      (reset_btn | ~pll_lock),  // PLLãƒ­ãƒƒã‚¯ã¾ã§ãƒªã‚»ãƒƒãƒˆ
        .hsync      (vga_hsync),    
        .vsync      (vga_vsync),    
        .video      (video_signal)  
    );

    assign vga_r = video_signal;
    assign vga_g = video_signal;
    assign vga_b = video_signal;

endmodule
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ 

Gowin EDAã§ï¼š

1. **ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¿ãƒ–ã§å³ã‚¯ãƒªãƒƒã‚¯** â†’ Add File
2. ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ï¼š
   ```
   âœ“ src/gowin_pll/gowin_pll.v
   âœ“ src/gowin_pll/gowin_pll_mod.v
   âœ“ pll_init.v
   ```

3. **å†ãƒ“ãƒ«ãƒ‰**
   - Synthesize
   - Place & Route  
   - Program

---

## âš ï¸ ç¾åœ¨ã®æ¥µæ€§è¨­å®šã«ã¤ã„ã¦

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒHSYNC/VSYNCã‚’**æ­£æ¥µæ€§**ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸï¼š

```verilog
// ç¾åœ¨ã®è¨­å®šï¼ˆæ­£æ¥µæ€§ï¼‰
if (åŒæœŸæœŸé–“ä¸­)
    hsync <= 1'b1;  // High
else
    hsync <= 1'b0;  // Low
```

ã“ã‚Œã¯ä¸€éƒ¨ã®ãƒ¢ãƒ‹ã‚¿ãƒ¼ç”¨ã®è¨­å®šã§ã™ã€‚

### æ¥µæ€§ã®é¸æŠ

| ã‚¿ã‚¤ãƒ— | åŒæœŸæœŸé–“ä¸­ | é€šå¸¸æ™‚ | å¯¾å¿œãƒ¢ãƒ‹ã‚¿ãƒ¼ |
|--------|----------|--------|------------|
| **è² æ¥µæ€§** | Low | High | å¤šæ•°ï¼ˆæ¨™æº–ï¼‰ |
| **æ­£æ¥µæ€§** | High | Low | ä¸€éƒ¨ã®ãƒ¢ãƒ‹ã‚¿ãƒ¼ |

**æ¨å¥¨**ï¼š
1. ã¾ãšæ­£æ¥µæ€§ã§è©¦ã™ï¼ˆç¾åœ¨ã®è¨­å®šï¼‰
2. ãƒ€ãƒ¡ãªã‚‰è² æ¥µæ€§ã«æˆ»ã™

---

## ğŸ”§ æ¬¡ã«ã‚„ã‚‹ã“ã¨

1. âœ… æ¥µæ€§å¤‰æ›´ï¼ˆå®Œäº†ï¼‰- æ­£æ¥µæ€§ã«è¨­å®šæ¸ˆã¿
2. â³ PLLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ 
3. â³ ãƒˆãƒƒãƒ—ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ›´æ–°
4. â³ å†ãƒ“ãƒ«ãƒ‰
5. â³ å‹•ä½œç¢ºèª

---

**ä½œæˆæ—¥**: 2026-02-16  
**PLLè¨­å®š**: 27MHz â†’ 25.175MHz
